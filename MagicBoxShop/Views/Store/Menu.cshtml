@model IEnumerable<MagicBoxShop.Models.Category>

<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/icons.css")" />
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/component.css")" />
<!--[if gte IE 5.5]>
<script src="@Url.Content("~/Scripts/nav-h.js")" 
        type="text/javascript"></script>
<![endif]-->
<ul id="navmenu-v">
    @foreach (var category in Model)
    {
      if(category.Subcategories.Count > 0)
      {
          <li>
                @if (@Roles.IsUserInRole("Admin"))
                {
                    @Html.ActionLink(category.Name, "IndexConcrete", "StoreManager", new { id = category.CategoryId, isCategory = true }, null);
                }
                else
                {
                    @Html.ActionLink(category.Name, "Browse", "Store", new { id = category.CategoryId, isCategory = true }, null);
                }
             
                   <ul>
                       @foreach (var subcategory in category.Subcategories)
                       {
                           if(subcategory.Products.Count>0)
                           {
                            <li>
                            @if (@Roles.IsUserInRole("Admin"))
                                {
                                    @Html.ActionLink(subcategory.Name, "IndexConcrete", "StoreManager", new { id = subcategory.SubcategoryId, isCategory = false }, null);
                                }
                                else
                                {
                                    @Html.ActionLink(subcategory.Name, "Browse", "Store", new {  id = subcategory.SubcategoryId, isCategory = false  }, null);
                                }
                           </li>
                           }

                       }
                    </ul>
          </li>
      }
    }
    @if (@Roles.IsUserInRole("Admin"))
    {
        <li> @Html.ActionLink("Все товары", "Index", "StoreManager")</li>
        <li> @Html.ActionLink("Заказы", "Index", "Order")</li>
        <li> @Html.ActionLink("Категории", "Index", "Category")</li>
        <li> @Html.ActionLink("Подкатегории", "Index", "Subcategory")</li>
        <li> @Html.ActionLink("Отзывы", "Index", "Comment")</li>
    }
    
</ul>
